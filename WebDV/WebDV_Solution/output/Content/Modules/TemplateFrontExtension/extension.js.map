{"version":3,"file":"extension.js","sources":["../../../../src/Controllers/DVController.ts","../../../../src/EventHandlers/DVEventHandler.ts","../../../../src/Index.ts"],"sourcesContent":["import { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\nimport { requestManager } from \"@docsvision/webclient/System/RequestManager\";\r\nimport { urlStore } from \"@docsvision/webclient/System/UrlStore\";\r\nimport { DirectorDataModel } from \"../Models/DirectorDataModel\";\r\n/**\r\n * класс реализующий серверное расширение WebDVExtension\r\n * */\r\nexport class DVController {\r\n    /**\r\n     * Получения руководителя сотрудника\r\n     * @param employeeId Id сотрудника\r\n     */\r\n    public getDirector(employeeId: string): JQueryDeferred<DirectorDataModel> {\r\n        let url = urlStore.urlResolver.resolveUrl(\"GetDirector\", \"DV\");\r\n        let data = {\r\n            employeeId: employeeId\r\n        }\r\n\r\n        return requestManager.post(url, JSON.stringify(data));\r\n    }\r\n    /**\r\n     * Получения масива сотрудников из группы секрктарь\r\n     * */\r\n    public getSecretary(): JQueryDeferred<GenModels.EmployeeDataModel[]> {\r\n        let url = urlStore.urlResolver.resolveUrl(\"GetSecretary\", \"DV\");\r\n\r\n        return requestManager.get(url);\r\n    }\r\n    /**\r\n     * Получение ценны билетов \r\n     * @param cityId Id города\r\n     * @param dateBusinessTripWith дата вылета\r\n     * @param dateBusinessTripTo дата прилета\r\n     */\r\n    public getPriceTickets(cityId: string, dateBusinessTripWith: Date, dateBusinessTripTo: Date): JQueryDeferred<number> {\r\n        let url = urlStore.urlResolver.resolveUrl(\"GetPriceTickets\", \"DV\");\r\n        let data = {\r\n            cityId: cityId,\r\n            dateBusinessTripWith: dateBusinessTripWith,\r\n            dateBusinessTripTo: dateBusinessTripTo\r\n        }\r\n\r\n        return requestManager.post(url, JSON.stringify(data));\r\n    }\r\n    /**\r\n     * Возврвщает сумму командировачных\r\n     * @param cityId Id города\r\n     */\r\n    public getMoneyBussinesTrip(cityId: string): JQueryDeferred<number> {\r\n        let url = urlStore.urlResolver.resolveUrl(\"GetMoneyBussinesTrip\", \"DV\");\r\n        let data = {\r\n            cityId: cityId,\r\n        }\r\n\r\n        return requestManager.post(url, JSON.stringify(data));\r\n    }\r\n    /**\r\n     * *Возвращат id операции для смены статуса карточки\r\n     * @param kindCardId Id вида карточки\r\n     * @param statCardName текущий статус карточки\r\n     * @param endStatName целевой статус карточки\r\n     */\r\n    public getOperationsIdState(kindCardId: string, statCardId: string, endStateName: string): JQueryDeferred<string> {\r\n        let url = urlStore.urlResolver.resolveUrl(\"GetOperationsIdState\", \"DV\");\r\n        let data = {\r\n            kindCardId: kindCardId,\r\n            statCardId: statCardId,\r\n            endStateName: endStateName\r\n        }\r\n\r\n        return requestManager.post(url, JSON.stringify(data));\r\n    }\r\n\r\n}\r\n\r\nexport type $DVController = { DVController: DVController };\r\nexport const $DVController = new DVController();","import { DirectoryDesignerRow } from \"@docsvision/webclient/BackOffice/DirectoryDesignerRow\";\r\nimport { Employee } from \"@docsvision/webclient/BackOffice/Employee\";\r\nimport { MultipleEmployees } from \"@docsvision/webclient/BackOffice/MultipleEmployees\";\r\nimport { Numerator } from \"@docsvision/webclient/BackOffice/Numerator\";\r\nimport { StateButtons } from \"@docsvision/webclient/BackOffice/StateButtons\";\r\nimport { MessageBox } from \"@docsvision/webclient/Helpers/MessageBox/MessageBox\";\r\nimport { CustomButton } from \"@docsvision/webclient/Platform/CustomButton\";\r\nimport { DateTimePicker } from \"@docsvision/webclient/Platform/DateTimePicker\";\r\nimport { Dropdown } from \"@docsvision/webclient/Platform/Dropdown\";\r\nimport { NumberControl } from \"@docsvision/webclient/Platform/Number\";\r\nimport { TextArea } from \"@docsvision/webclient/Platform/TextArea\";\r\nimport { TextBox } from \"@docsvision/webclient/Platform/TextBox\";\r\nimport { CancelableEventArgs } from \"@docsvision/webclient/System/CancelableEventArgs\";\r\nimport { ICardSavingEventArgs } from \"@docsvision/webclient/System/ICardSavingEventArgs\";\r\nimport { IEventArgs } from \"@docsvision/webclient/System/IEventArgs\";\r\nimport { Layout } from \"@docsvision/webclient/System/Layout\";\r\nimport { func } from \"prop-types\";\r\nimport { $DVController } from \"../Controllers/DVController\";\r\n\r\n/**\r\n * Функция считающее количетво дней между \"даты с\" и \"даты по\"\r\n * @param l laypot для поиска поля количества дней\r\n * @param dBTW // дата с\r\n * @param dBTT // дата по\r\n */\r\nexport async function setCountDayBusinesDay(sender: DateTimePicker, e: any): JQueryDeferred<void> {\r\n    let CountDayBT = sender.layout.controls.tryGet<NumberControl>(\"CountDayBusinessTrip\");\r\n\r\n    let dBTW = sender.layout.controls.tryGet<DateTimePicker>(\"DateBusinessTripWith\");\r\n    let dBTT = sender.layout.controls.tryGet<DateTimePicker>(\"DateBusinessTripTo\");\r\n\r\n    if (CountDayBT && dBTW && dBTW.hasValue() && dBTT && dBTT.hasValue()) {\r\n        let diff = Math.floor((dBTT.value.getTime() - dBTW.value.getTime()) / (1000 * 3600 * 24)) + 1;\r\n        if (diff > 0) CountDayBT.value = diff;\r\n        else CountDayBT.value = null;\r\n    }\r\n    let cityCtrl = sender.layout.controls.tryGet<DirectoryDesignerRow>(\"CityBusinessTrip\");\r\n\r\n    if (cityCtrl && cityCtrl.hasValue())\r\n        cityChenged(cityCtrl, e);\r\n    else {\r\n        let priceTicketsCtrl = sender.layout.controls.tryGet<NumberControl>(\"PriceTickets\");\r\n\r\n        if (priceTicketsCtrl) priceTicketsCtrl.value = null\r\n    }\r\n}\r\n/**\r\n * показ краткой информации \r\n */\r\nexport async function onClickButtonShowShortInfo(sender: CustomButton, e: any): JQueryDeferred<void> {\r\n    let _nubmerrequest = sender.layout.controls.tryGet<Numerator>(\"Number\");\r\n    let _dateCreated = sender.layout.controls.tryGet<DateTimePicker>(\"DateCreated\");\r\n    let _dateBTWith = sender.layout.controls.tryGet<DateTimePicker>(\"DateBusinessTripWith\");\r\n    let _dateBTTo = sender.layout.controls.tryGet<DateTimePicker>(\"DateBusinessTripTo\");\r\n    let _baseBTInfo = sender.layout.controls.tryGet<TextArea>(\"BaseForBusinessTrip\");\r\n\r\n    let s = \"\";\r\n\r\n    if (_nubmerrequest && _nubmerrequest.value.number) s +=\"Номер заявки: \" + _nubmerrequest.value.number + \"\\n\";\r\n    if (_dateCreated && _dateCreated.value) s += \"Дата создания: \" + _dateCreated.value.toLocaleDateString(\"ru\") + \"\\n\";\r\n    if (_dateBTWith && _dateBTWith.value) s += \"Даты командировки с:\" + _dateBTWith.value.toLocaleDateString(\"ru\") + \"\\t\";\r\n    if (_dateBTTo && _dateBTTo.value) s += \"по: \" + _dateBTTo.value.toLocaleDateString(\"ru\") + \"\\n\";\r\n    if (_baseBTInfo && _baseBTInfo.value) s += \"Основание для поездки: \" + _baseBTInfo.value;\r\n\r\n    if (s != \"\") MessageBox.ShowInfo(s);\r\n    else MessageBox.ShowInfo(\"Не найдены поля для отображения информации\");\r\n}\r\n/**\r\n * Проверка перед сохранением\r\n */\r\nexport async function onSaveCard(sender: Layout, e: CancelableEventArgs<ICardSavingEventArgs>): JQueryDeferred<void> {\r\n    let _name = sender.controls.tryGet<TextBox>(\"Name\");\r\n\r\n    if (_name && (_name.value == null || _name.value == \"\")) {\r\n        MessageBox.ShowInfo(\"Не заполнено поле Название!\");\r\n        e.cancel();\r\n        return;\r\n    }\r\n    e.accept();\r\n}\r\n/**\r\n * Проверка введенного телефона\r\n */\r\nexport async function telephoneChanged(sender: TextBox, e: any): JQueryDeferred<void> {\r\n    if (sender.value && sender.value.length > 12) sender.value = sender.value.substring(0, 12);\r\n}\r\n/**\r\n * Активация/Деактивация кнопки \"На соласование\"\r\n */\r\nexport async function onVisebleButtonOnApproval(sender: Layout, e: any): JQueryDeferred<void> {\r\n    let ButtonOnApproval = sender.controls.tryGet<CustomButton>(\"OnApproval\");\r\n    let StateButton = sender.controls.tryGet<StateButtons>(\"ButtonState\");\r\n\r\n    if (ButtonOnApproval && sender.cardInfo.state.caption == \"Проект\") {\r\n        if (StateButton) StateButton.params.visibility = false;\r\n    }\r\n    else if (ButtonOnApproval) ButtonOnApproval.params.visibility = false;\r\n}\r\n/**\r\n * получаем руководителя и телефон\r\n * при смене командированого\r\n */\r\nexport async function onChangedPersonBussinesTrip(sender: Employee, e: any): JQueryDeferred<void> {\r\n    let director = sender.layout.controls.tryGet<Employee>(\"Director\");\r\n    let telephone = sender.layout.controls.tryGet<TextBox>(\"Telephone\");\r\n\r\n    if (sender.hasValue() && director && telephone) {\r\n        let director_model = await $DVController.getDirector(sender.value.id);\r\n\r\n        if (director_model) {\r\n            director.value = director_model.director;\r\n            telephone.value = director_model.phone;\r\n        }\r\n        else {\r\n            director.value = null;\r\n            telephone.value = null;\r\n        }\r\n    }\r\n}\r\n/**\r\n * первое окрытие карточки\r\n */\r\nexport async function openedCard(sender: Layout, e: IEventArgs): JQueryDeferred<void> {\r\n    let sekretary = await $DVController.getSecretary();\r\n\r\n    let whoRegistrating = sender.controls.tryGet<MultipleEmployees>(\"WhoRegistrating\");\r\n\r\n    if (sekretary && whoRegistrating)\r\n        whoRegistrating.value = sekretary;\r\n}\r\n/**\r\n * получаем стоимость билетов\r\n */\r\nexport async function getPriceTikcetOnClick(sender: CustomButton, e: IEventArgs): JQueryDeferred<void> {\r\n    let tikets = sender.layout.controls.tryGet<Dropdown>(\"Tikets\");\r\n\r\n    if (tikets && tikets.value == \"Поезд\") {\r\n        MessageBox.ShowInfo(\"Функция запроса стоимости билетов реализована только для Авиаперелетов!\");\r\n        return;\r\n    } \r\n\r\n    let dateBTW = sender.layout.controls.tryGet<DateTimePicker>(\"DateBusinessTripWith\");\r\n    let dateBTT = sender.layout.controls.tryGet<DateTimePicker>(\"DateBusinessTripTo\");\r\n    let cityControl = sender.layout.controls.tryGet<DirectoryDesignerRow>(\"CityBusinessTrip\");\r\n    let priceTik = sender.layout.controls.tryGet<NumberControl>(\"PriceTickets\");\r\n\r\n    if (dateBTT && dateBTT.value && dateBTW && dateBTW.value && cityControl && cityControl.hasValue() && priceTik) {\r\n        let price = await $DVController.getPriceTickets(cityControl.value.id, dateBTW.value, dateBTT.value);\r\n\r\n        if (price == -4.0) MessageBox.ShowInfo(\"При попытке получения цены произошла ошибка!\");\r\n        else if (price == -3.0) MessageBox.ShowInfo(\"Не найдены билеты вылета и прилета в указаные даты!\");\r\n        else if (price == -2.0) MessageBox.ShowInfo(\"Не найдены билеты прилета в указаную дату!\");\r\n        else if (price == -1.0) MessageBox.ShowInfo(\"Не найдены билеты вылета в указаную дату!\");\r\n        else if (price > 0.0) priceTik.value = price;\r\n        else MessageBox.ShowInfo(\"Ошибка при получении данных с сервера!\");\r\n    }\r\n    else MessageBox.ShowInfo(\"Ошибка при работе с ключевыми полями!\");\r\n}\r\n/**\r\n * кнопка на согласование\r\n */\r\nexport async function onApprovalOnClick(sender: CustomButton, e: IEventArgs): JQueryDeferred<void> {\r\n    let cardInfo = sender.layout.cardInfo;\r\n\r\n    let operationId = await $DVController.getOperationsIdState(cardInfo.kindId, cardInfo.state.stateId, \"OnApproval\");\r\n\r\n    if (operationId != \"00000000-0000-0000-0000-000000000000\")\r\n        sender.layout.changeState(operationId);\r\n    else\r\n        MessageBox.ShowWarning(\"Ошибка при смене состояния\");\r\n}\r\n/**\r\n * событие изменения города\r\n */\r\nexport async function cityChenged(sender: DirectoryDesignerRow, e: any): JQueryDeferred<void> {\r\n    if (!sender.hasValue()) return;\r\n\r\n    let moneyBT = sender.layout.controls.tryGet<NumberControl>(\"MoneyBusinessTrip\");\r\n    let dayBT = sender.layout.controls.tryGet<NumberControl>(\"CountDayBusinessTrip\");\r\n\r\n    if (moneyBT == null && dayBT == null && dayBT.value == null) return;\r\n\r\n    let priceBT = (await $DVController.getMoneyBussinesTrip(sender.value.id)) * dayBT.value;\r\n\r\n    if (priceBT > 0.0) moneyBT.value = priceBT;\r\n    else moneyBT.value = null;\r\n\r\n    let priceTicketsCtrl = sender.layout.controls.tryGet<NumberControl>(\"PriceTickets\");\r\n\r\n    if (priceTicketsCtrl) priceTicketsCtrl.value = null\r\n}\r\n/**\r\n * изменения вида билетов \r\n */\r\nexport async function ticketsChenged(sender: Dropdown, e: any): JQueryDeferred<void> {\r\n    if (sender.hasValue() && sender.value == \"Поезд\") {\r\n        let priceTicketsCtrl = sender.layout.controls.tryGet<NumberControl>(\"PriceTickets\");\r\n\r\n        if (priceTicketsCtrl) priceTicketsCtrl.value = null\r\n    }\r\n}","﻿import * as DVEventHandler from \"./EventHandlers/DVEventHandler\";\r\nimport { extensionManager } from \"@docsvision/webclient/System/ExtensionManager\";\r\n\r\n\r\n// Главная входная точка всего расширения\r\n// Данный файл должен импортировать прямо или косвенно все остальные файлы, \r\n// чтобы rollup смог собрать их все в один бандл.\r\n\r\n// Регистрация расширения позволяет корректно установить все\r\n// обработчики событий, сервисы и прочие сущности web-приложения.\r\nextensionManager.registerExtension({\r\n    name: \"DVEventHandler\",\r\n    version: \"1.0.0\",\r\n    globalEventHandlers: [DVEventHandler]\r\n\r\n})"],"names":["urlStore","requestManager","MessageBox","extensionManager"],"mappings":"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"}